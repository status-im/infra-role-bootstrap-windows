---
# Using become_user: admin doesn't work on Windows.
- name: Copy scoop from Administrator
  tags: ['role::bootstrap:users']
  win_copy:
    src: 'C:\Users\administrator\scoop'
    dest: 'C:\Users\admin'
    remote_src: true

- name: Install NuGet for admin
  tags: ['role::bootstrap:users']
  win_shell: Find-PackageProvider -Name Nuget -ForceBootstrap -IncludeDependencies -Force

- name: Install PSFzf for admin
  tags: ['role::bootstrap:users']
  win_shell: Install-Module -Name PSFzf -RequiredVersion 2.0.0 -Confirm:$false -Force

- name: Create folder for powershell profile
  tags: ['role::bootstrap:users']
  win_file:
    path: 'C:\Users\admin\Documents\WindowsPowerShell'
    state: 'directory'

- name: Create powershell profile file
  tags: ['role::bootstrap:users']
  win_copy:
    src: 'Profile.ps1'
    dest: 'C:\Users\admin\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1'
